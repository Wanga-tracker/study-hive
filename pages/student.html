<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Edu Sync Hub Africa – Student Dashboard</title>
  <!-- Google Fonts: Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Main CSS for Student Dashboard -->
  <link rel="stylesheet" href="../css/student.css" />
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="hamburger" id="hamburger">☰</div>
    <div class="logo neon-text">Edu Sync Hub Africa</div>
    <div class="header-right">
      <div class="bell-icon" id="bellIcon">🔔</div>
      <div class="profile-avatar" id="profileAvatar">👤</div>
    </div>
  </header>

  <!-- Sidebar (initially hidden on mobile) -->
  <nav class="sidebar" id="sidebar">
    <ul>
      <li><a href="#" data-section="profile"><span>👤</span> My Profile</a></li>
      <li><a href="#" data-section="academics"><span>📚</span> Academics</a></li>
      <li><a href="#" data-section="aiZone"><span>🧠</span> AI Zone</a></li>
      <li><a href="#" data-section="planner"><span>🗓️</span> Planner</a></li>
      <li><a href="#" data-section="chatroom"><span>💬</span> Chatroom</a></li>
      <li><a href="#" data-section="projects"><span>🧪</span> My Projects</a></li>
      <li><a href="#" data-section="extras"><span>⚙️</span> Extras</a></li>
      <li><a href="#" id="feedbackBtn"><span>💡</span> Feedback</a></li>
      <li><a href="#" id="logoutBtn"><span>🚪</span> Logout</a></li>
    </ul>
  </nav>

  <!-- Notification Bar -->
  <div class="notification-bar" id="notificationBar">
    <span id="notificationText">No new notifications yet...</span>
    <button id="closeNotif">✕</button>
  </div>

  <!-- Main Content Area (dynamic) -->
  <main class="main-content" id="mainContent">
    <!-- Default Dashboard View -->
    <section id="dashboardHome" class="section active">
      <div class="greeting">Hi, <span id="userName">Student</span>! 🎓 Welcome back!</div>
      <div class="summary-card">
        <p>💰 Coins: <span id="coins">0</span></p>
        <p>🌟 Referrals: <span id="referrals">0</span> (<a href="#" id="refLink">edusync.com/ref/ABC</a>)</p>
        <p>🧠 Today's Quote: <span id="quote">Loading…</span></p>
      </div>
      <div class="quick-actions">
        <button class="action-btn" data-section="academics">Submit Assignment</button>
        <button class="action-btn" data-section="aiZone">Ask Elijah</button>
        <button class="action-btn" data-section="planner">Add Task</button>
        <button class="action-btn" data-section="projects">Check Projects</button>
      </div>
    </section>

    <!-- My Profile -->
    <section id="profile" class="section">
      <h2>👤 My Profile</h2>
      <div class="card">
        <img src="#" id="profilePicDisplay" alt="Profile Picture" class="profile-pic-large" />
        <input type="file" id="profilePicInput" accept="image/*" />
        <label>Full Name</label>
        <input type="text" id="profileName" placeholder="Your full name" />
        <label>Username</label>
        <input type="text" id="profileUsername" placeholder="Your username" />
        <label>Phone</label>
        <input type="tel" id="profilePhone" placeholder="+2547XXXXXXXX" />
        <label>County</label>
        <input type="text" id="profileCounty" placeholder="Your county" />
        <label>Referral Link</label>
        <input type="text" id="profileReferral" readonly />
        <label>Current Coins</label>
        <input type="text" id="profileCoins" readonly />
        <button class="glow-button" id="saveProfileBtn">Save Profile</button>
      </div>
    </section>

    <!-- Academics (Assignments + Fun Study) -->
    <section id="academics" class="section">
      <h2>📚 Academics</h2>
      <div class="card">
        <h3>Assignments</h3>
        <div id="assignmentList">
          <!-- Dynamically populated from Firestore -->
          <p>Loading assignments…</p>
        </div>
        <hr />
        <h3>Fun Study</h3>
        <div id="funStudyFacts">
          <!-- Rotating facts displayed here -->
          <p id="funFact">Loading fact…</p>
          <button class="action-btn" id="likeFactBtn">👍 Like</button>
        </div>
      </div>
    </section>

    <!-- AI Zone (Elijah, Wanga, Emma) -->
    <section id="aiZone" class="section">
      <h2>🧠 AI Zone</h2>
      <div class="card ai-tabs">
        <nav>
          <button class="tab-btn active" data-ai="elijah">Elijah (Chat AI)</button>
          <button class="tab-btn" data-ai="wanga">Wanga (Career Plan)</button>
          <button class="tab-btn" data-ai="emma">Emma (Talent Strategy)</button>
        </nav>
        <div class="ai-content">
          <!-- Elijah Chat -->
          <div id="elijah" class="ai-panel active">
            <div id="elijahChatWindow" class="chat-window">
              <!-- Messages appended here -->
            </div>
            <input type="text" id="elijahInput" placeholder="Ask Elijah a question…" />
            <button class="action-btn" id="elijahSendBtn">Send</button>
          </div>
          <!-- Wanga Career Plan -->
          <div id="wanga" class="ai-panel">
            <input type="text" id="careerGoalInput" placeholder="Enter your dream career…" />
            <button class="action-btn" id="wangaSendBtn">Generate Plan</button>
            <div id="wangaResult" class="ai-result"></div>
          </div>
          <!-- Emma Talent Strategy -->
          <div id="emma" class="ai-panel">
            <input type="text" id="talentInput" placeholder="Enter your top talent (e.g. Singing, Coding)..." />
            <button class="action-btn" id="emmaSendBtn">Get Tips</button>
            <div id="emmaResult" class="ai-result"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Planner (Diary + Schedule) -->
    <section id="planner" class="section">
      <h2>🗓️ Planner</h2>
      <div class="card planner-tabs">
        <nav>
          <button class="tab-btn active" data-plan="diaryTab">My Diary</button>
          <button class="tab-btn" data-plan="scheduleTab">My Schedule</button>
        </nav>
        <div class="planner-content">
          <!-- My Diary -->
          <div id="diaryTab" class="plan-panel active">
            <label for="diaryPIN">Enter PIN (4 digits):</label>
            <input type="password" id="diaryPIN" maxlength="4" placeholder="••••" />
            <button class="action-btn" id="unlockDiaryBtn">Unlock Diary</button>
            <textarea id="diaryContent" placeholder="Write your entries here…" rows="8" disabled></textarea>
            <button class="glow-button" id="saveDiaryBtn" disabled>Save Entry</button>
          </div>
          <!-- My Schedule -->
          <div id="scheduleTab" class="plan-panel">
            <label for="scheduleEventInput">Event/Task:</label>
            <input type="text" id="scheduleEventInput" placeholder="New event (e.g., Math Revision at 5pm)" />
            <button class="action-btn" id="addScheduleBtn">Add to Schedule</button>
            <div id="scheduleList">
              <!-- Loaded from Firestore -->
              <p>No events yet.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Chatroom -->
    <section id="chatroom" class="section">
      <h2>💬 Chatroom</h2>
      <div class="card">
        <div id="chatList" class="chat-list">
          <!-- Real-time chat messages inserted here -->
          <p>Loading chat…</p>
        </div>
        <input type="text" id="chatInput" placeholder="Type a message…" />
        <button class="action-btn" id="chatSendBtn">Send</button>
      </div>
    </section>

    <!-- My Projects -->
    <section id="projects" class="section">
      <h2>🧪 My Projects</h2>
      <div class="card">
        <label for="projectTitle">Project Title:</label>
        <input type="text" id="projectTitle" placeholder="Your project idea…" />
        <label for="projectDesc">Description:</label>
        <textarea id="projectDesc" placeholder="Describe your project idea…" rows="5"></textarea>
        <button class="glow-button" id="submitProjectBtn">Submit Idea</button>
        <div id="projectList">
          <!-- Admin‐approved projects will appear here -->
          <p>No projects submitted yet.</p>
        </div>
      </div>
    </section>

    <!-- Extras (YouTube, Google Drive, Classroom, etc.) -->
    <section id="extras" class="section">
      <h2>⚙️ Extras</h2>
      <div class="card extras-cards">
        <div class="extra-card">
          <h3>▶️ YouTube Videos</h3>
          <input type="text" id="youtubeSearchInput" placeholder="Search educational videos…" />
          <button class="action-btn" id="youtubeSearchBtn">Search</button>
          <div id="youtubeResults">
            <!-- Fetched YouTube video embeds/listings -->
          </div>
        </div>
        <div class="extra-card">
          <h3>🗄️ Google Drive Upload</h3>
          <input type="file" id="driveUploadInput" multiple />
          <button class="action-btn" id="driveUploadBtn">Upload to Drive</button>
          <div id="driveFileList">
            <p>No files uploaded yet.</p>
          </div>
        </div>
        <div class="extra-card">
          <h3>📅 Google Classroom</h3>
          <button class="action-btn" id="gcRedirectBtn">Go to Classroom</button>
        </div>
        <div class="extra-card">
          <h3>📆 Google Calendar</h3>
          <button class="action-btn" id="gcalRedirectBtn">Open Calendar</button>
        </div>
        <div class="extra-card">
          <h3>📊 Google Sheets</h3>
          <button class="action-btn" id="gsheetsRedirectBtn">Open Sheets</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Feedback Modal (hidden by default) -->
  <div class="modal" id="feedbackModal">
    <div class="modal-content">
      <span class="close-modal" id="closeFeedbackModal">✕</span>
      <h2>Send Feedback</h2>
      <textarea id="feedbackText" placeholder="Your feedback… (max 500 chars)" rows="6"></textarea>
      <button class="glow-button" id="submitFeedbackBtn">Submit Feedback</button>
    </div>
  </div>

  <!-- Firebase + External SDKs -->
  <!-- (Compat versions for simplicity) -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-storage-compat.js"></script>
  <!-- Placeholder for Google API Client (Calendar, Drive, Sheets) -->
  <script src="https://apis.google.com/js/api.js"></script>
  <!-- Placeholder for Gemini / Genkit (will be loaded via Firebase Functions later) -->
  <!-- <script src="path/to/gemini-sdk.js"></script> -->

  <!-- Facts Data -->
  <script type="module" src="../js/facts.js"></script>
  <!-- Main Dashboard Logic -->
  <script type="module" src="../js/student.js"></script>
</body>
</html>
